(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Cwg5:function(e,t,r){"use strict";r.r(t),r.d(t,"CalculationsModule",(function(){return h}));var n=r("PCNd"),o=r("tyNb"),b=r("3Pt+"),i=r("pLZG"),c=r("lJxs"),l=r("fXoL"),a=r("ofXK");function u(e,t){if(1&e&&(l.Mb(0,"option",25),l.ec(1),l.Lb()),2&e){const e=t.$implicit;l.Yb("value",e.value)("title",e.display),l.xb(1),l.gc(" ",e.display," ")}}function d(e,t){if(1&e&&(l.Mb(0,"option",25),l.ec(1),l.Lb()),2&e){const e=t.$implicit;l.Yb("value",e.value)("title",e.display),l.xb(1),l.gc(" ",e.display," ")}}function s(e,t){if(1&e){const e=l.Nb();l.Kb(0),l.Mb(1,"tr",12),l.Mb(2,"th",13),l.ec(3),l.Lb(),l.Mb(4,"td",14),l.Ib(5,"input",15),l.Lb(),l.Mb(6,"td",14),l.Mb(7,"select",16),l.dc(8,u,2,3,"option",17),l.Lb(),l.Lb(),l.Mb(9,"td",14),l.Ib(10,"input",18),l.Lb(),l.Mb(11,"td",14),l.Ib(12,"input",19),l.Lb(),l.Mb(13,"td",14),l.Mb(14,"select",20),l.dc(15,d,2,3,"option",17),l.Lb(),l.Lb(),l.Mb(16,"td",14),l.Ib(17,"input",21),l.Lb(),l.Mb(18,"td",14),l.Ib(19,"input",22),l.Lb(),l.Mb(20,"td",23),l.Mb(21,"button",24),l.Tb("click",(function(){l.ac(e);const r=t.index;return l.Vb().remove(r)})),l.ec(22,"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 "),l.Lb(),l.Lb(),l.Lb(),l.Jb()}if(2&e){const e=t.$implicit,r=t.index,n=l.Vb();l.xb(1),l.Yb("formGroup",e),l.xb(2),l.fc(r+1),l.xb(5),l.Yb("ngForOf",n.measureAndAmount),l.xb(7),l.Yb("ngForOf",n.ddvRate),l.xb(2),l.Yb("value",e.get("priceBeforeTax").value*e.get("totalRequired").value),l.xb(2),l.Yb("value",e.get("priceBeforeTax").value*e.get("totalRequired").value*e.get("ddvRate").value)}}function m(e,t){if(1&e&&(l.Kb(0),l.Mb(1,"tr",26),l.Ib(2,"td",14),l.Ib(3,"td",14),l.Ib(4,"td",14),l.Ib(5,"td",14),l.Mb(6,"td",14),l.ec(7," \u0412\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432 "),l.Lb(),l.Mb(8,"td",14),l.ec(9),l.Lb(),l.Mb(10,"td",23),l.ec(11," \u0412\u043a\u0443\u043f\u043do \u0434\u0434\u0432 "),l.Lb(),l.Mb(12,"td",23),l.ec(13),l.Lb(),l.Lb(),l.Jb()),2&e){const e=t.ngIf;l.xb(9),l.gc(" ",e.priceBeforeDDV," "),l.xb(4),l.gc(" ",e.priceAfterDDV," ")}}const p=[{path:"",component:(()=>{class e{constructor(e){this.formBuilder=e,this.measureAndAmount=[{display:"\u041a\u0438\u043b\u043e\u0433\u0440\u0430\u043c",value:"kg"},{display:"\u041b\u0438\u0442\u0430\u0440",value:"lt"},{display:"\u0411\u0440\u043e\u0458",value:"br"}],this.ddvRate=[{display:"5%",value:.05},{display:"18%",value:.18}],this.dynamicForm=this.formBuilder.group({items:new b.b([this.getNewItemControl()])})}ngOnInit(){this.result$=this.dynamicForm.valueChanges.pipe(Object(i.a)(()=>this.dynamicForm.valid),Object(c.a)(e=>this.calculateResult(e.items)))}calculateResult(e){let t={priceBeforeDDV:0,priceAfterDDV:0};return e.map(e=>{const r=this.calculateSingle(e);t.priceAfterDDV+=r.priceAfterDDV,t.priceBeforeDDV+=r.priceBeforeDDV}),t}calculateSingle(e){const t=e.priceBeforeTax*e.totalRequired;return{priceBeforeDDV:t,priceAfterDDV:t*e.ddvRate}}getNewItemControl(){return this.formBuilder.group({subject:[""],priceBeforeTax:[null,b.n.required],measureAndAmount:["kg",b.n.required],ddvRate:[.18,b.n.required],totalRequired:[null,b.n.required]})}remove(e){this.items.removeAt(e)}addNewItem(){this.items.push(this.getNewItemControl())}get formItems(){return this.dynamicForm.controls}get items(){return this.formItems.items}onSubmit(){this.dynamicForm.invalid||alert("SUCCESS!! :-)\n\n"+JSON.stringify(this.dynamicForm.value,null,4))}onReset(){this.dynamicForm.reset(),this.items.clear()}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(b.c))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-calculations"]],decls:50,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"card","m-3"],[1,"card-header"],[1,"table","table-hover"],[1,"bg-info"],["scope","col"],["scope","col",1,"btn-action"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer","text-center"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","reset",1,"btn","btn-warning",3,"click"],[1,"bg-primary",3,"formGroup"],["scope","row"],[1,"align-middle"],["type","text","formControlName","subject","title","\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u043d\u0430 \u043d\u0430\u0431\u0430\u0432\u043a\u0430\u0442\u0430 \u043e\u0434\u043d\u043e\u0441\u043d\u043e \u043e\u043f\u0438\u0441 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430 \u043a\u043e\u0458\u0430 \u0441\u0435 \u043f\u043e\u0431\u0430\u0440\u0443\u0432\u0430 \u0438 \u043c\u043e\u0436\u0435\u0431\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u0438 \u0438\u043b\u0438 \u0433\u0440\u0430\u043c\u0430\u0436\u0430","placeholder","\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u043d\u0430 \u043d\u0430\u0431\u0430\u0432\u043a\u0430",1,"form-control"],["id","measureAndAmount","title","\u0415\u0434\u0438\u043d\u0435\u0447\u043d\u0430 \u043c\u0435\u0440\u043a\u0430 \u0438 \u043a\u043e\u0447\u0438\u043d\u0430 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043e\u0442 , \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0431\u0438\u0434\u0435 \u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043c \u201e\u043a\u0433\u201c , \u043b\u0438\u0442\u0430\u0440 \u201e\u043b\u0442\u201c \u0438 \u0431\u0440\u043e\u0458 \u201e\u0431\u0440\u201c ","formControlName","measureAndAmount","required","",1,"form-control"],["class","align-center",3,"value","title",4,"ngFor","ngForOf"],["type","number","title","\u0426\u0435\u043d\u0430 \u043f\u043e \u0435\u0434\u0438\u043d\u0438\u0446\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434 - \u041f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u043b\u043a\u0443 \u0435 \u0446\u0435\u043d\u0430\u0442\u0430 \u043d\u0430 \u041b\u0438\u0442\u0430\u0440 \u041c\u043b\u0435\u043a\u043e , \u0438\u043b\u0438 \u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043c \u0458\u0430\u0431\u043e\u043b\u043a\u0430","formControlName","priceBeforeTax","placeholder","\u0435\u0434\u0438\u043d\u0435\u0447\u043d\u0430 \u0446\u0435\u043d\u0430 \u0446\u0435\u0437 \u0434\u0434\u0432","onkeydown","return event.keyCode !== 69","required","",1,"form-control"],["type","number","formControlName","totalRequired","placeholder","\u0432\u043a\u0443\u043f\u043d\u0430 \u043f\u043e\u0431\u0430\u0440\u0430\u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 \u043e\u0434 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434","title","\u0432\u043a\u0443\u043f\u043d\u0430 \u043f\u043e\u0431\u0430\u0440\u0430\u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 \u043e\u0434 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434.\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430 \u043b\u0438\u0442\u0430\u0440 \u041c\u043b\u0435\u043a\u043e \u0441\u0435 \u043f\u0438\u0448\u0443\u0432\u0430 60 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0441\u043a\u0438 \u0441\u0435 \u043f\u0440\u0435\u0441\u043c\u0435\u0442\u0443\u0432\u0430 \u0432\u043e \u043b\u0438\u0442\u0440\u0438","onkeydown","return event.keyCode !== 69","required","",1,"form-control"],["id","ddvRate","title","\u0421\u0442\u0430\u043f\u043a\u0430\u0442\u0430 \u043d\u0430 \u0434\u0434\u0432 \u043f\u043e \u043a\u043e\u0458\u0430 \u0442\u0440\u0435\u0431\u0430 \u0434\u0430 \u0441\u0435 \u043f\u0440\u0435\u0441\u043c\u0435\u0442\u0430 \u043e\u0432\u043e\u0458 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434","formControlName","ddvRate","required","",1,"form-control"],["type","number","placeholder","\u0432\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432","disabled","","title","\u0412\u043a\u0443\u043f\u043d\u0430\u0442\u0430 \u0446\u0435\u043d\u0430 \u043d\u0430 \u0441\u0442\u0430\u0432\u043a\u0430\u0442\u0430 \u0431\u0435\u0437 \u0432\u043a\u043b\u0443\u0447\u0435\u043d\u043e \u0434\u0434\u0432",1,"form-control",3,"value"],["type","number","placeholder","\u0432\u043a\u0443\u043f\u043do \u0434\u0434\u0432","disabled","","title","\u0412\u043a\u0443\u043f\u043d\u043e \u0434\u0434\u0432",1,"form-control",3,"value"],[1,"align-middle","btn-action"],["type","button",1,"btn","btn-danger",3,"click"],[1,"align-center",3,"value","title"],[1,"list-group","list-group-flush"]],template:function(e,t){1&e&&(l.Mb(0,"form",0),l.Tb("ngSubmit",(function(){return t.onSubmit()})),l.Mb(1,"div",1),l.Mb(2,"h5",2),l.ec(3,"\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0440\u0435\u0441\u043c\u0435\u0442\u043a\u0430"),l.Lb(),l.Mb(4,"table",3),l.Mb(5,"thead"),l.Mb(6,"tr",4),l.Ib(7,"th",5),l.Mb(8,"th",5),l.ec(9,"1"),l.Lb(),l.Mb(10,"th",5),l.ec(11,"2"),l.Lb(),l.Mb(12,"th",5),l.ec(13,"3"),l.Lb(),l.Mb(14,"th",5),l.ec(15,"4"),l.Lb(),l.Mb(16,"th",5),l.ec(17,"5"),l.Lb(),l.Mb(18,"th",5),l.ec(19,"6"),l.Lb(),l.Mb(20,"th",5),l.ec(21,"7"),l.Lb(),l.Ib(22,"th",6),l.Lb(),l.Mb(23,"tr",4),l.Mb(24,"th",5),l.ec(25,"#"),l.Lb(),l.Mb(26,"th",5),l.ec(27,"\u0412\u0438\u0434 \u0438 \u043e\u043f\u0438\u0441 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430"),l.Lb(),l.Mb(28,"th",5),l.ec(29,"\u0415\u0434\u0438\u043d.\u041c\u0435\u0440\u043a\u0430 \u0438 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 "),l.Lb(),l.Mb(30,"th",5),l.ec(31,"\u0415\u0434\u0438\u043d\u0435\u0447\u043d\u0430 \u0426\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432."),l.Lb(),l.Mb(32,"th",5),l.ec(33,"\u0432\u043a\u0443\u043f\u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 \u043f\u043e \u0415\u0434\u0438\u043d.\u041c\u0435\u0440\u043a\u0430"),l.Lb(),l.Mb(34,"th",5),l.ec(35,"\u0441\u0442\u0430\u043f\u043a\u0430 \u043d\u0430 \u0434\u0434\u0432 (5%/18%)"),l.Lb(),l.Mb(36,"th",5),l.ec(37,"\u0412\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432"),l.Lb(),l.Mb(38,"th",5),l.ec(39,"\u0412\u043a\u0443\u043f\u043d\u043e \u0434\u0434\u0432"),l.Lb(),l.Ib(40,"th",6),l.Lb(),l.Lb(),l.Mb(41,"tbody"),l.dc(42,s,23,6,"ng-container",7),l.dc(43,m,14,2,"ng-container",8),l.Wb(44,"async"),l.Lb(),l.Lb(),l.Mb(45,"div",9),l.Mb(46,"button",10),l.Tb("click",(function(){return t.addNewItem()})),l.ec(47,"\u0414\u043e\u0434\u0430\u0434\u0438 \u041d\u043e\u0432"),l.Lb(),l.Mb(48,"button",11),l.Tb("click",(function(){return t.onReset()})),l.ec(49,"\u0418\u0441\u0447\u0438\u0441\u0442\u0438 \u0441\u0435"),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&e&&(l.Yb("formGroup",t.dynamicForm),l.xb(42),l.Yb("ngForOf",t.items.controls),l.xb(1),l.Yb("ngIf",l.Xb(44,4,t.result$)),l.xb(3),l.Yb("disabled",!t.dynamicForm.valid))},directives:[b.p,b.h,b.e,a.i,a.j,b.a,b.g,b.d,b.m,b.l,b.j,b.i,b.o],pipes:[a.b],styles:["tr[_ngcontent-%COMP%]{display:table-row}"]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[o.a.forChild(p)],o.a]}),e})(),h=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[n.a,f]]}),e})()}}]);