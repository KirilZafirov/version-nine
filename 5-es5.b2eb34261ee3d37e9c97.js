!function(){function t(e,r){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,r)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=n(t);if(e){var c=n(this).constructor;i=Reflect.construct(o,arguments,c)}else i=o.apply(this,arguments);return r(this,i)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Cwg5:function(r,n,o){"use strict";o.r(n),o.d(n,"CalculationsModule",(function(){return R}));var u=o("PCNd"),b=o("tyNb"),l=o("3Pt+"),a=o("pLZG"),f=o("lJxs"),s=o("zx2A"),d=function(){function t(e){i(this,t),this.notifier=e}return c(t,[{key:"call",value:function(t,e){var r=new p(t),n=Object(s.c)(this.notifier,new s.a(r));return n&&!r.seenValue?(r.add(n),e.subscribe(r)):r}}]),t}(),p=function(r){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)}(o,r);var n=e(o);function o(t){var e;return i(this,o),(e=n.call(this,t)).seenValue=!1,e}return c(o,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),o}(s.b),m=o("XNiG"),h=o("fXoL"),v=o("ofXK");function y(t,e){if(1&t&&(h.Mb(0,"option",34),h.cc(1),h.Lb()),2&t){var r=e.$implicit;h.Wb("value",r.value)("title",r.display),h.xb(1),h.ec(" ",r.display," ")}}function L(t,e){if(1&t&&(h.Mb(0,"option",34),h.cc(1),h.Lb()),2&t){var r=e.$implicit;h.Wb("value",r.value)("title",r.display),h.xb(1),h.ec(" ",r.display," ")}}function M(t,e){if(1&t){var r=h.Nb();h.Kb(0),h.Mb(1,"tr",23),h.Mb(2,"th",24),h.cc(3),h.Lb(),h.Mb(4,"td",9),h.Ib(5,"input",25),h.Lb(),h.Mb(6,"td",9),h.Ib(7,"input",26),h.Lb(),h.Mb(8,"td",9),h.Mb(9,"select",27),h.bc(10,y,2,3,"option",28),h.Lb(),h.Lb(),h.Mb(11,"td",9),h.Ib(12,"input",29),h.Lb(),h.Mb(13,"td",9),h.Mb(14,"select",30),h.bc(15,L,2,3,"option",28),h.Lb(),h.Lb(),h.Mb(16,"td",9),h.Ib(17,"input",31),h.Lb(),h.Mb(18,"td",9),h.Ib(19,"input",32),h.Lb(),h.Mb(20,"td",10),h.Mb(21,"button",33),h.Tb("click",(function(){h.Yb(r);var t=e.index;return h.Vb().remove(t)})),h.cc(22,"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 "),h.Lb(),h.Lb(),h.Lb(),h.Jb()}if(2&t){var n=e.$implicit,i=e.index,o=h.Vb();h.xb(1),h.Wb("formGroup",n),h.xb(2),h.dc(i+1),h.xb(7),h.Wb("ngForOf",o.measureAndAmount),h.xb(5),h.Wb("ngForOf",o.ddvRate),h.xb(2),h.Wb("value",n.get("priceBeforeTax").value*n.get("totalRequired").value),h.xb(2),h.Wb("value",n.get("priceBeforeTax").value*n.get("totalRequired").value*n.get("ddvRate").value)}}var g,k,D,w=[{path:"",component:(g=function(){function t(e){i(this,t),this.formBuilder=e,this.destroy$=new m.a,this.measureAndAmount=[{display:"\u041a\u0438\u043b\u043e\u0433\u0440\u0430\u043c",value:"kg"},{display:"\u041b\u0438\u0442\u0430\u0440",value:"lt"},{display:"\u0411\u0440\u043e\u0458",value:"br"}],this.ddvRate=[{display:"5%",value:.05},{display:"18%",value:.18}],this.result={priceBeforeDDV:0,priceAfterDDV:0},this.dynamicForm=this.formBuilder.group({items:new l.b([this.getNewItemControl()])}),this.formEndResult=this.formBuilder.group({priceAfterLicitation:[null]})}return c(t,[{key:"ngOnInit",value:function(){var t,e=this;this.dynamicForm.valueChanges.pipe(Object(a.a)((function(){return e.dynamicForm.valid})),Object(f.a)((function(t){return e.calculateResult(t.items)})),(t=this.destroy$,function(e){return e.lift(new d(t))})).subscribe((function(t){e.result=t}))}},{key:"calculateResult",value:function(t){var e=this,r={priceBeforeDDV:0,priceAfterDDV:0};return t.map((function(t){var n=e.calculateSingle(t);r.priceAfterDDV+=n.priceAfterDDV,r.priceBeforeDDV+=n.priceBeforeDDV})),r}},{key:"calculateSingle",value:function(t){var e=t.priceBeforeTax*t.totalRequired;return{priceBeforeDDV:e,priceAfterDDV:e*t.ddvRate}}},{key:"getNewItemControl",value:function(){return this.formBuilder.group({subject:[""],priceBeforeTax:[null,l.n.required],measureAndAmount:["kg",l.n.required],ddvRate:[.05,l.n.required],totalRequired:[null,l.n.required]})}},{key:"remove",value:function(t){this.items.removeAt(t)}},{key:"addNewItem",value:function(){this.items.push(this.getNewItemControl())}},{key:"priceAfterLicitation",value:function(){var t=this;this.items.controls.forEach((function(e){var r=t.calculateReducerPercent(t.formEndResult.get("priceAfterLicitation").value),n=t.calculateReducedValue(e.get("priceBeforeTax").value,r);e.get("priceBeforeTax").patchValue(n)}))}},{key:"calculateReducerPercent",value:function(t){return(this.result.priceBeforeDDV-t)/this.result.priceBeforeDDV}},{key:"calculateReducedValue",value:function(t,e){return t-t*e}},{key:"onSubmit",value:function(){this.dynamicForm.invalid||alert("SUCCESS!! :-)\n\n"+JSON.stringify(this.dynamicForm.value,null,4))}},{key:"submitEndResult",value:function(){this.formEndResult.invalid||alert("SUCCESS!! :-)\n\n"+JSON.stringify(this.formEndResult.value,null,4))}},{key:"onReset",value:function(){this.dynamicForm.reset(),this.items.clear()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"formItems",get:function(){return this.dynamicForm.controls}},{key:"items",get:function(){return this.formItems.items}}]),t}(),g.\u0275fac=function(t){return new(t||g)(h.Hb(l.c))},g.\u0275cmp=h.Bb({type:g,selectors:[["app-calculations"]],decls:90,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"card","m-3"],[1,"card-header"],[1,"table","table-hover"],[1,"bg-info"],["scope","col"],["scope","col",1,"btn-action"],[4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"align-middle"],[1,"align-middle","btn-action"],["colspan","2",1,"align-middle"],[1,"card-footer","text-center"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","reset",1,"btn","btn-warning",3,"click"],[1,"container"],[1,"row"],[1,"col-md-6"],["name","edit-product",1,"example-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","priceAfterLicitation"],["id","priceAfterLicitation","type","number","formControlName","priceAfterLicitation","placeholder","\u0432\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432","title","\u0412\u043a\u0443\u043f\u043d\u0430\u0442\u0430 \u0446\u0435\u043d\u0430 \u043d\u0430 \u0441\u0442\u0430\u0432\u043a\u0430\u0442\u0430 \u0431\u0435\u0437 \u0432\u043a\u043b\u0443\u0447\u0435\u043d\u043e \u0434\u0434\u0432",1,"form-control"],["type","button",1,"btn","btn-success",3,"click"],[1,"bg-primary",3,"formGroup"],["scope","row"],["type","text","formControlName","subject","title","\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u043d\u0430 \u043d\u0430\u0431\u0430\u0432\u043a\u0430\u0442\u0430 \u043e\u0434\u043d\u043e\u0441\u043d\u043e \u043e\u043f\u0438\u0441 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430 \u043a\u043e\u0458\u0430 \u0441\u0435 \u043f\u043e\u0431\u0430\u0440\u0443\u0432\u0430 \u0438 \u043c\u043e\u0436\u0435\u0431\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u0438 \u0438\u043b\u0438 \u0433\u0440\u0430\u043c\u0430\u0436\u0430","placeholder","\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u043d\u0430 \u043d\u0430\u0431\u0430\u0432\u043a\u0430",1,"form-control"],["type","number","formControlName","totalRequired","placeholder","\u0432\u043a\u0443\u043f\u043d\u0430 \u043f\u043e\u0431\u0430\u0440\u0430\u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 \u043e\u0434 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434","title","\u0432\u043a\u0443\u043f\u043d\u0430 \u043f\u043e\u0431\u0430\u0440\u0430\u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 \u043e\u0434 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434.\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430 \u043b\u0438\u0442\u0430\u0440 \u041c\u043b\u0435\u043a\u043e \u0441\u0435 \u043f\u0438\u0448\u0443\u0432\u0430 60 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0441\u043a\u0438 \u0441\u0435 \u043f\u0440\u0435\u0441\u043c\u0435\u0442\u0443\u0432\u0430 \u0432\u043e \u043b\u0438\u0442\u0440\u0438","onkeydown","return event.keyCode !== 69","required","",1,"form-control"],["id","measureAndAmount","title","\u0415\u0434\u0438\u043d\u0435\u0447\u043d\u0430 \u043c\u0435\u0440\u043a\u0430 \u0438 \u043a\u043e\u0447\u0438\u043d\u0430 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043e\u0442 , \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0431\u0438\u0434\u0435 \u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043c \u201e\u043a\u0433\u201c , \u043b\u0438\u0442\u0430\u0440 \u201e\u043b\u0442\u201c \u0438 \u0431\u0440\u043e\u0458 \u201e\u0431\u0440\u201c ","formControlName","measureAndAmount","required","",1,"form-control"],["class","align-center",3,"value","title",4,"ngFor","ngForOf"],["type","number","title","\u0426\u0435\u043d\u0430 \u043f\u043e \u0435\u0434\u0438\u043d\u0438\u0446\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434 - \u041f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u043b\u043a\u0443 \u0435 \u0446\u0435\u043d\u0430\u0442\u0430 \u043d\u0430 \u041b\u0438\u0442\u0430\u0440 \u041c\u043b\u0435\u043a\u043e , \u0438\u043b\u0438 \u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043c \u0458\u0430\u0431\u043e\u043b\u043a\u0430","formControlName","priceBeforeTax","placeholder","\u0435\u0434\u0438\u043d\u0435\u0447\u043d\u0430 \u0446\u0435\u043d\u0430 \u0446\u0435\u0437 \u0434\u0434\u0432","onkeydown","return event.keyCode !== 69","required","",1,"form-control"],["id","ddvRate","title","\u0421\u0442\u0430\u043f\u043a\u0430\u0442\u0430 \u043d\u0430 \u0434\u0434\u0432 \u043f\u043e \u043a\u043e\u0458\u0430 \u0442\u0440\u0435\u0431\u0430 \u0434\u0430 \u0441\u0435 \u043f\u0440\u0435\u0441\u043c\u0435\u0442\u0430 \u043e\u0432\u043e\u0458 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434","formControlName","ddvRate","required","",1,"form-control"],["type","number","placeholder","\u0432\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432","disabled","","title","\u0412\u043a\u0443\u043f\u043d\u0430\u0442\u0430 \u0446\u0435\u043d\u0430 \u043d\u0430 \u0441\u0442\u0430\u0432\u043a\u0430\u0442\u0430 \u0431\u0435\u0437 \u0432\u043a\u043b\u0443\u0447\u0435\u043d\u043e \u0434\u0434\u0432",1,"form-control",3,"value"],["type","number","placeholder","\u0432\u043a\u0443\u043f\u043do \u0434\u0434\u0432","disabled","","title","\u0412\u043a\u0443\u043f\u043d\u043e \u0434\u0434\u0432",1,"form-control",3,"value"],["type","button",1,"btn","btn-danger",3,"click"],[1,"align-center",3,"value","title"]],template:function(t,e){1&t&&(h.Mb(0,"form",0),h.Tb("ngSubmit",(function(){return e.onSubmit()})),h.Mb(1,"div",1),h.Mb(2,"h5",2),h.cc(3,"\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0440\u0435\u0441\u043c\u0435\u0442\u043a\u0430"),h.Lb(),h.Mb(4,"table",3),h.Mb(5,"thead"),h.Mb(6,"tr",4),h.Ib(7,"th",5),h.Mb(8,"th",5),h.cc(9,"1"),h.Lb(),h.Mb(10,"th",5),h.cc(11,"2"),h.Lb(),h.Mb(12,"th",5),h.cc(13,"3"),h.Lb(),h.Mb(14,"th",5),h.cc(15,"4"),h.Lb(),h.Mb(16,"th",5),h.cc(17,"5"),h.Lb(),h.Mb(18,"th",5),h.cc(19,"6"),h.Lb(),h.Mb(20,"th",5),h.cc(21,"7"),h.Lb(),h.Ib(22,"th",6),h.Lb(),h.Mb(23,"tr",4),h.Mb(24,"th",5),h.cc(25,"#"),h.Lb(),h.Mb(26,"th",5),h.cc(27,"\u0412\u0438\u0434 \u0438 \u043e\u043f\u0438\u0441 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430"),h.Lb(),h.Mb(28,"th",5),h.cc(29,"\u0432\u043a\u0443\u043f\u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 \u043f\u043e \u0415\u0434\u0438\u043d.\u041c\u0435\u0440\u043a\u0430"),h.Lb(),h.Mb(30,"th",5),h.cc(31,"\u0415\u0434\u0438\u043d.\u041c\u0435\u0440\u043a\u0430 \u0438 \u043a\u043e\u043b\u0438\u0447\u0438\u043d\u0430 "),h.Lb(),h.Mb(32,"th",5),h.cc(33,"\u0415\u0434\u0438\u043d\u0435\u0447\u043d\u0430 \u0426\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432."),h.Lb(),h.Mb(34,"th",5),h.cc(35,"\u0441\u0442\u0430\u043f\u043a\u0430 \u043d\u0430 \u0434\u0434\u0432 (5%/18%)"),h.Lb(),h.Mb(36,"th",5),h.cc(37,"\u0412\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432"),h.Lb(),h.Mb(38,"th",5),h.cc(39,"\u0412\u043a\u0443\u043f\u043d\u043e \u0434\u0434\u0432"),h.Lb(),h.Ib(40,"th",6),h.Lb(),h.Lb(),h.Mb(41,"tbody"),h.bc(42,M,23,6,"ng-container",7),h.Mb(43,"tr",8),h.Ib(44,"td",9),h.Ib(45,"td",9),h.Ib(46,"td",9),h.Ib(47,"td",9),h.Ib(48,"td",9),h.Mb(49,"td",9),h.cc(50," \u0412\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0431\u0435\u0437 \u0434\u0434\u0432 "),h.Lb(),h.Ib(51,"td",10),h.Mb(52,"td",10),h.cc(53),h.Lb(),h.Lb(),h.Mb(54,"tr",8),h.Ib(55,"td",9),h.Ib(56,"td",9),h.Ib(57,"td",9),h.Ib(58,"td",9),h.Ib(59,"td",9),h.Mb(60,"td",11),h.cc(61," \u0412\u043a\u0443\u043f\u043do \u0434\u0434\u0432 "),h.Lb(),h.Mb(62,"td",10),h.cc(63),h.Lb(),h.Lb(),h.Mb(64,"tr",8),h.Ib(65,"td",9),h.Ib(66,"td",9),h.Ib(67,"td",9),h.Ib(68,"td",9),h.Ib(69,"td",9),h.Mb(70,"td",11),h.cc(71," \u0412\u043a\u0443\u043f\u043d\u0430 \u0446\u0435\u043d\u0430 \u0441\u043e \u0434\u0434\u0432 \u0414\u0435\u043d\u0430\u0440\u0438 "),h.Lb(),h.Mb(72,"td",10),h.cc(73),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(74,"div",12),h.Mb(75,"button",13),h.Tb("click",(function(){return e.addNewItem()})),h.cc(76,"\u0414\u043e\u0434\u0430\u0434\u0438 \u041d\u043e\u0432"),h.Lb(),h.Mb(77,"button",14),h.Tb("click",(function(){return e.onReset()})),h.cc(78,"\u0418\u0441\u0447\u0438\u0441\u0442\u0438 \u0441\u0435"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(79,"div",15),h.Mb(80,"div",16),h.Ib(81,"div",17),h.Mb(82,"div",17),h.Mb(83,"form",18),h.Tb("ngSubmit",(function(){return e.submitEndResult()})),h.Mb(84,"div",19),h.Mb(85,"label",20),h.cc(86," \u0412\u043d\u0435\u0441\u0435\u0442\u0435 \u043a\u043e\u0458\u0430 \u0435 \u0446\u0435\u043d\u0430\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u043b\u0438\u0446\u0438\u0442\u0430\u0446\u0438\u0458\u0430\u0442\u0430 \u043e\u0434\u043d\u043e\u0441\u043d\u043e \u0458\u0430\u0432\u043d\u043e\u0442\u043e \u043d\u0430\u0434\u0434\u0430\u0432\u0430\u045a\u0435"),h.Lb(),h.Ib(87,"input",21),h.Lb(),h.Mb(88,"button",22),h.Tb("click",(function(){return e.priceAfterLicitation()})),h.cc(89,"\u041f\u0440\u0435\u0441\u043c\u0435\u0442\u0430\u0458 \u043f\u043e \u043a\u0440\u0430\u0458\u043d\u0430 \u0446\u0435\u043d\u0430"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t&&(h.Wb("formGroup",e.dynamicForm),h.xb(42),h.Wb("ngForOf",e.items.controls),h.xb(11),h.ec(" ",e.result.priceBeforeDDV," \u0414\u0435\u043d\u0430\u0440\u0438 "),h.xb(10),h.ec(" ",e.result.priceAfterDDV," \u0414\u0435\u043d\u0430\u0440\u0438 "),h.xb(10),h.ec(" ",e.result.priceAfterDDV+e.result.priceBeforeDDV," "),h.xb(2),h.Wb("disabled",!e.dynamicForm.valid),h.xb(8),h.Wb("formGroup",e.formEndResult))},directives:[l.p,l.h,l.e,v.h,l.j,l.a,l.g,l.d,l.l,l.m,l.i,l.o],styles:["tr[_ngcontent-%COMP%]{display:table-row}"]}),g)}],I=((D=function t(){i(this,t)}).\u0275mod=h.Fb({type:D}),D.\u0275inj=h.Eb({factory:function(t){return new(t||D)},imports:[[b.a.forChild(w)],b.a]}),D),R=((k=function t(){i(this,t)}).\u0275mod=h.Fb({type:k}),k.\u0275inj=h.Eb({factory:function(t){return new(t||k)},imports:[[u.a,I]]}),k)}}])}();